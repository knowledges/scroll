!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define("shifone",[],function(){return t}):n.shifone=t.call(n)}("undefined"!=typeof window?window:this,function(){function n(){}return n.prototype={constructor:n,version:"1.0.0",isScrolling:!1,currentSection:0,sectionNum:1,throttle:function(n,t){var e=null;return function(){var i=this,o=arguments;clearTimeout(e),e=setTimeout(function(){n.apply(i,o)},t)}},init:function(){var n=this;return n.sectionNum=$(".section-wrap").length+1,n.toTargetPage(1),$(window).load(function(){n.reCal()}),$(document).on("mousewheel DOMMouseScroll",function(t){var e=t.originalEvent,i=e.wheelDelta||-e.detail,o=0>i?!0:!1;n.scrollHandle(o?!0:!1),t.preventDefault()}),window.onresize=n.throttle(function(){n.reCal()},50),$("#main-nav").click(function(t){if("i"===t.target.tagName.toLowerCase()){var e=$(t.target).data("idx");n.toTargetPage(e,!0)}}),n.loadingImg(),this},loadingImg:function(){var n=["images/photowall.png","images/icon_down.png","images/sec_3/sec_1.jpg","images/sec_3/sec_2.jpg","images/sec_3/sec_3.jpg","images/sec_3/sec_1.jpg","images/sec4_bg.png"],t=0;$.each(n,function(n,e){var i=new Image;i.onload=function(){t++},i.src=e});var e=window.setInterval(function(){t===n.length&&(window.clearInterval(e),$("#main-loading").fadeOut(),$("body").addClass("loading-finish"),$("body").removeClass("loading-process"))},500)},scrollHandle:function(n){var t=this,e=0;t.isScrolling||(e=n?t.currentSection+1:t.currentSection-1,1>=e&&(e=1),e>=this.sectionNum&&(e=this.sectionNum),t.toTargetPage(e))},toTargetPage:function(n,t){var e=this;if(n===e.currentSection)return!1;if(!e.isScrolling){if(e.isScrolling=!0,(2===e.currentSection||t)&&1===n)return $("#p_btn").animate({opacity:0,bottom:0},500),$("#photo-wall").animate({"margin-top":0},600),$("#main-nav i").removeClass("active").eq(0).addClass("active"),$("html,body").animate({scrollTop:0},600),window.setTimeout(function(){e.currentSection=1,e.isScrolling=!1},700),!0;if(1===e.currentSection&&2===n)return $("#p_btn").animate({opacity:1,bottom:70},500),$("#first-down,#down-logo").animate({"margin-top":-60},500),$("#photo-wall").animate({"margin-top":-128},600),$("#main-nav i").removeClass("active").eq(0).addClass("active"),window.setTimeout(function(){e.currentSection=2,e.isScrolling=!1},700),!0;var i=e.calcTargetTop(n);$("html").animate({scrollTop:i},600),$("body").animate({scrollTop:i},600,function(){e.currentSection=n,1===n?$("#main-nav i").removeClass("active").eq(0).addClass("active"):$("#main-nav i").removeClass("active").eq(e.currentSection-2).addClass("active"),3===n?$("#second-pic-list img").each(function(n,t){$(t).delay(300*n).animate({opacity:1,top:0},800)}):4==n&&$("#third-pic-list div").each(function(n,t){$(t).delay(80*n).fadeIn(800)}),e.isScrolling=!1})}},calcTargetTop:function(n){return 1>=n&&(n=1),n>=this.sectionNum&&(n=this.sectionNum),this.currentSection=n,n>2?$(window).height()*(n-2):0},reCal:function(){$(".section-wrap").each(function(){$(this).css({height:$(window).height()})});var n=0;this.currentSection>=3&&(n=$(window).height()*(this.currentSection-2)),$("html,body").scrollTop(n),$("body").hasClass("loading-finish")&&$("#main-loading").css({left:$(window).width()-60-50,top:"100px",margin:0})}},(new n).init()});